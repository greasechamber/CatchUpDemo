<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=414, height=896, initial-scale=1.0">
    <title>Catch Up App</title>
    <link rel="stylesheet" href="messagingStyle.css">
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="phone-screen">
        <div class="header-container">
            <div class="header">
              <button  id = "backButton">
                <img src="icons/back.png" alt = "Back icon" class="header-icon">
              </button>
      
              <button id = "appTitle">
                <img src="icons/title.png" alt = "Title" class="header-title">
              </button>
      
              <button id="menu-btn">
                <img src="icons/menu.png" alt = "Menu icon" class="header-icon">
              </button>
            </div>
        </div>
    
        <!--OVERLAY-->
        <div class="overlay" id="overlay"></div>
    
        <!--SIDEBAR-->
        <aside class="sidebar" id="sidebar">
            <button class="close-btn" id="close-btn">Ã—</button>
            <nav>
                <ul>
                <li>
                    <a href="/html/setting/setting.html">
                    <img src="settings.png" class="sidebar-icon" alt="Info">
                    Settings
                    </a>
                </li>
                <li>
                    <a href="CatchUpList.html">
                    <img src="list.png" class="sidebar-icon" alt="List">
                    Catch Up List
                    </a>
                </li>
                <li>
                    <a href="help.html">
                    <img src="help.png" class="sidebar-icon" alt="Help">
                    Help
                    </a>
                </li>
                </ul>
            </nav>
        </aside>
        <div class="body-container">
            <div class="contact-box">
                <div class = "search-row" id="srow1">
                    <input class="deleteBox" type="checkbox" style="display: none;"> 
                    <button class="search-button" id="b_button">
                        <div>
                            <img class="search-pfp" src="icons/male_blonde.png">
                            <div id="vertical-text-1">
                                <span class="search-name">Bob</span>
                                Awake From<br><span class="mono">23:00-15:00</span>
                            </div>
                        </div>
                    </button>
                </div> 
                <div class = "search-row" id="srow2">
                    <input class="deleteBox" type="checkbox" style="display: none;"> 
                    <button class="search-button" id="m_button">
                        <div>
                            <img class="search-pfp" src="icons/female_blonde.png">
                            <div id="vertical-text-2">
                                <span class="search-name">Margaret</span>
                                Awake From<br><span class="mono">22:30-14:30</span>
                            </div>
                        </div>
                    </button>
                </div>
                <div class = "search-row" id="srow3">
                    <input class="deleteBox" type="checkbox" style="display: none;"> 
                    <button class="search-button" id="ph_button">
                        <div>
                            <img class="search-pfp" src="icons/male_black.png">
                            <div id="vertical-text-3">
                                <span class="search-name">Phillip</span>
                                Awake From<br><span class="mono">20:00-12:00</span>
                            </div>
                        </div>
                    </button>
                </div>
                <div class = "search-row" id="srow4">
                    <input class="deleteBox" type="checkbox" style="display: none;"> 
                    <button class="search-button" id="g_button">
                        <div>
                            <img class="search-pfp" src="icons/male_black.png">
                            <div id="vertical-text-4">
                                <span class="search-name">Greg</span>
                                Awake From<br><span class="mono">6:00-22:00</span>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </div>
        <div id="undoDiv">
            <button id="undoButton">Undo</button>
        </div>
        <div id="buttons">
            <button id="deleteButton">Delete</button>
            <img id="trash" src="icons/trash.png">
            <button id="cancelButton">Cancel</button>
        </div>
        <div class="footer-container">
            <div class="footer-nav">
              <button class = "footer-nav-button">
                <img id="socialMediaButton" src="icons/socialmedia.png" alt="Social media icon" class="icon"><br>
                 Social Media
              </button>
              <button class = "footer-nav-button-active">
                <img id="messageButton" src="icons/message.png" alt = "Message icon" class="icon"><br>
                Message
              </button>
              <button class = "footer-nav-button" id = "searchNavigation">
                <img id="searchButton" src="icons/search.png" alt="Search icon" class="icon"><br>
                Search
              </button>
              <button class = "footer-nav-button" id = "profileNavigation">
                <img id="profileButton" src="icons/profile.png" alt="Profile icon" class="icon"><br>
                Profile
              </button>
            </div>
        </div>
    </div>
    <script src="/script.js"></script>
    <script>
        const menuBtn = document.getElementById('menu-btn');
        const closeBtn = document.getElementById('close-btn');
        const sidebar = document.getElementById('sidebar');
        const overlay   = document.getElementById('overlay');

        function openNav() {
            sidebar.classList.add('open');
            overlay.classList.add('visible');
        }

        function closeNav() {
            sidebar.classList.remove('open');
            overlay.classList.remove('visible');
        }

        // menuBtn.addEventListener('click', () => sidebar.classList.add('open'));
        // closeBtn.addEventListener('click', () => sidebar.classList.remove('open'));
        menuBtn .addEventListener('click', openNav);
        closeBtn.addEventListener('click', closeNav);
        overlay.addEventListener('click', closeNav);

        document.addEventListener('click', e => {
            if (!sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
            closeNav();
            }
        });
        document.getElementById("appTitle").addEventListener("click", () => {
            window.location.href = "/html/social_media/wrapped_Baby.html";
            
            const fromDate = document.getElementById("dateInputFrom").value;
            const toDate = document.getElementById("dateInputTo").value;

            localStorage.setItem("fromDate", fromDate);
            localStorage.setItem("toDate", toDate);
        });

        document.getElementById("socialMediaButton").onclick = function () {
            location.href = 'html/social_media/wrapped_Baby.html';
        };

        document.getElementById("messageButton").onclick = function () {
            location.href = 'messaging.html';
        };

        document.getElementById("searchButton").onclick = function () {
            location.href = 'post-search.html';
        };

        document.getElementById("profileButton").onclick = function () {
            location.href = 'html/profiles/profile_Self.html';
        };

        document.getElementById("b_button").onclick = function () {
            location.href = 'messagingText.html';
            sessionStorage.setItem('contact', 'Bob');
        };

        document.getElementById("m_button").onclick = function () {
            location.href = 'messagingText.html';
            sessionStorage.setItem('contact', 'Margaret');
        };

        document.getElementById("ph_button").onclick = function () {
            location.href = 'messagingText.html';
            sessionStorage.setItem('contact', 'Philip');
        };

        document.getElementById("g_button").onclick = function () {
            location.href = 'messagingText.html';
            sessionStorage.setItem('contact', 'Greg');
        };

        var checkboxesOn = false;
        var sure = false;
        document.getElementById("trash").onclick = function () {
            if (!checkboxesOn) {
                checkboxesOn = true;
                var elements = document.getElementsByClassName("deleteBox");
                for (var i = 0; i < elements.length; i++) {
                    elements.item(i).style = "display: inherit";
                    elements.item(i).checked = false;
                }
                document.getElementById("deleteButton").style = "display: block";
                document.getElementById("cancelButton").style = "display: block";
                document.getElementById("trash").style = "cursor:auto";
            } else {
                return;
            }
        };

        document.getElementById("deleteButton").onclick = function () {
            if (sure) {
                checkboxesOn = false;
                sure = false;
                var contacts = document.getElementsByClassName("search-row");
                var elements = document.getElementsByClassName("deleteBox");
                for (var i = 0; i < contacts.length; i++) {
                    if (elements.item(i).checked) {
                        elements.item(i).checked = false;
                        contacts.item(i).style = "display: none";
                    }
                    elements.item(i).style = "display: none";
                }
                document.getElementById("deleteButton").style = "display: none";
                document.getElementById("cancelButton").style = "display: none";
                document.getElementById("deleteButton").innerHTML = "Delete";
                document.getElementById("trash").style = "cursor:pointer";
                document.getElementById("undoButton").style = "display: block";
            } else {
                document.getElementById("deleteButton").innerHTML = "Are you sure?";
                sure = true;
            }
            
        }

        document.getElementById("cancelButton").onclick = function () {
            checkboxesOn = false;
            sure = false;
            var contacts = document.getElementsByClassName("search-row");
            var elements = document.getElementsByClassName("deleteBox");
            for (var i = 0; i < contacts.length; i++) {
                if (elements.item(i).checked) {
                    elements.item(i).checked = false;
                }
                elements.item(i).style = "display: none";
            }
            document.getElementById("deleteButton").style = "display: none";
            document.getElementById("cancelButton").style = "display: none";
            document.getElementById("deleteButton").innerHTML = "Delete";
            document.getElementById("trash").style = "cursor:pointer";
        }

        document.getElementById("undoButton").onclick = function () {
            checkboxesOn = false;
            sure = false;
            var contacts = document.getElementsByClassName("search-row");
            var elements = document.getElementsByClassName("deleteBox");
            for (var i = 0; i < contacts.length; i++) {
                if (elements.item(i).checked) {
                    elements.item(i).checked = false;
                }
                elements.item(i).style = "display: none";
                contacts.item(i).style = "display: flex";
            }
            document.getElementById("deleteButton").style = "display: none";
            document.getElementById("cancelButton").style = "display: none";
            document.getElementById("deleteButton").innerHTML = "Delete";
            document.getElementById("trash").style = "cursor:pointer";
            document.getElementById("undoButton").style = "display: none";
        }
    </script>
</body>
